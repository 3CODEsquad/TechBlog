namespace TechBlog.Migrations
{
    using Microsoft.AspNet.Identity;
    using Microsoft.AspNet.Identity.EntityFramework;
    using Models;
    using System;
    using System.Data.Entity.Migrations;
    using System.Linq;

    internal sealed class Configuration : DbMigrationsConfiguration<ApplicationDbContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
            AutomaticMigrationDataLossAllowed = true;
        }

        protected override void Seed(ApplicationDbContext context)
        {
            if (!context.Users.Any())
            {
                // If the database is empty, populate sample data in it

                CreateUser(context, "admin@gmail.com", "123", "System Administrator");
                CreateUser(context, "pesho@gmail.com", "123", "Peter Ivanov");
                CreateUser(context, "merry@gmail.com", "123", "Maria Petrova");
                CreateUser(context, "geshu@gmail.com", "123", "George Petrov");

                CreateRole(context, "Administrators");
                AddUserToRole(context, "admin@gmail.com", "Administrators");

                CreatePost(context,
                    title: "Neuron unites two theoretical models on motion detection",
                    body: @"<p>As indicated by their name, photoreceptor cells in the eye respond to light: is an image point bright or dark? They do not indicate the direction of a movement. This perception only arises in the brain through the comparative computations of light signals coming from adjacent image points. Engineers, physicists and neurobiologists have been debating the exact nature of these computations for around 50 years. Scientists from the Max Planck Institute of Neurobiology have now combined two theories about these computations, which were previously considered to be alternative hypotheses – and discovered that they are carried out in a single neuron.</p>
                    <p>Flies are usually very difficult to catch. No wonder – they invest around ten percent of their brain in the detection and processing of image motion. For the fly, a hand approaches in slow motion and the fly's evasive manoeuvre has long been triggered before any real danger arises. Scientists have been researching for decades how the fly brain can perceive and process movements so quickly and accurately. ""Our goal is slowly coming into view, and we are close to completely decoding the neuronal circuit of motion perception in the fly,"" says Alexander Borst, who has been working on this problem with his Department at the Max Planck Institute of Neurobiology for quite some time. The scientists have now come one step closer to the answer: They have provided experimental data that combine two theories previously considered as alternatives.</p>
                    <p>Over 50 years ago, two rival theoretical models were developed which attempted to explain how information about the direction of motion could be computed from the signals transmitted by adjacent image points. One theory states that light stimuli along one direction, referred to as the preferred direction, enhance each other. In contrast, the other model assumes that light stimuli along the opposite direction, known as the null direction, suppress each other. In both cases, a weak direction-selective signal arises, which must then be further processed and amplified. ""Interestingly, however, we discovered that already the first cells that respond to the motion stimuli – the T4 and T5 cells – display strong directional selectivity,"" reports Alexander Borst.</p><p>In order to resolve this discrepancy, the neurobiologists refined a test set-up so that they were able to stimulate individual functional columns of the fly brain in succession and record the responses of the directionally-selective T4 cells. The data they collected and the corresponding computer simulations were clear: T4 cells intensify the input signals when they run along their preferred direction and suppress them when they run along the null direction. Both of the proposed mechanisms are thus implemented in the T4 cells of the fly brain, and what was thought to be an 'either-or' scenario became an 'as-well-as' one. ""It's no wonder that these cells can differentiate so accurately between motion directions,"" says Jurgen Haag, first author of the study. ""Nature's solution is more complicated than either of the proposed models.""</p>",
                    date: new DateTime(2016, 03, 27, 17, 53, 48),
                    authorUsername: "merry@gmail.com"
                );

                CreatePost(context,
                    title: "Life-saving drones take flight in Rwanda",
                    body: @"<p>From Amazon's flying delivery service to smuggling drugs over borders, the uses of civilian drones are multiplying fast.</p><p>The most valuable application yet may be as a new emergency service in Rwanda for delivering vital medical supplies, starting with blood.</p><p>A fleet of 15 drones will soon be buzzing around the vast country, bypassing the sub-standard road network, and making life-saving interventions.</p><p>The fixed-wing crafts are the product of Californian start-up Zipline, in partnership with delivery giants UPS and vaccine specialists the Gavi Alliance. The technology is cutting edge, but simple to use, according to Keller Rinaudo, Co-Founder of Zipline.</p><p>""(Users) send a text message and they'll get a text message back saying the Zip has been discharged. They'll be able to walk outside, see the delivery occur and have what they need to save the patient's life,"" he says. </p><p>""The accuracy of each delivery is extremely high and we're actually able to deliver into their mailbox which is approximately the size of three parking spaces.""</p><h3>Mapping the terrain</h3><p>The drones are controlled from an iPad that is programmed with coordinates and a flight plan, drawing on the delivery expertise of UPS.</p><p>When the drone arrives it ejects the payload with rubber bands, to float to earth on a mini parachute.</p><p>""We've put $800,000 into Zipline and this partnership to develop this service and we've invested a lot of our senior staff in terms of their logistics expertise, "" says Laura Lane, President of Global Public Affairs at UPS. ""We've got some of the most sophisticated mapping technologies and we've been testing these capabilities and so from our perspective it's about mapping more of the Rwandan territory and making sure (the blood) gets delivered at that very point it should.""</p><p>The demand for such a service in Rwanda is clear, where trauma injuries and avoidable deaths through haemorrhaging after childbirth are relatively common, and the infrastructure for delivering and storing blood supplies is poor. Each delivery is projected to cost between $15 and $30, roughly the same as by motorbike.</p><h3>Beyond borders</h3><p>The government has enthusiastically embraced drones, with plans for the world's first droneport are well underway, and new legislation to encourage their use. The Ministry of Health is on board with Zipline's scheme, and Rinaudo says it is far easier to operate here than at home.</p><p>""The nice thing about operating in a small, fast moving country like Rwanda is that they have both a much simpler airspace and they have a small civil aviation authority that can move fast and actually adopt modern regulatory practices sooner than a country like the US, "" he says. </p><p>The company claims to have raised $18 million to date, with backers including Yahoo founder Jerry Yang and Microsoft Co-founder Paul Allen.</p><p>Should the scheme prove successful, it is likely to extend far beyond Rwanda's borders.</p><p>""If it works here in Rwanda, we could take it everywhere, "" says Lane.</p>",
                    date: new DateTime(2016, 05, 11, 08, 22, 03),
                    authorUsername: "merry@gmail.com"
                );

                CreatePost(context,
                    title: "Making a Solar Energy Conversion Breakthrough With Help From a Ferroelectrics Pioneer",
                    body: @"<p>Designers of solar cells may soon be setting their sights higher, as a discovery by a team of researchers has revealed a class of materials that could be better at converting sunlight into energy than those currently being used in solar arrays. Their research shows how a material can be used to extract power from a small portion of the sunlight spectrum with a conversion efficiency that is above its theoretical maximum — a value called the Shockley-Queisser limit. This finding, which could lead to more power-efficient solar cells, was seeded in a near-half-century old discovery by Russian physicist Vladimir M. Fridkin, PhD, a visiting professor of physics at Drexel University, who is also known as one of the innovators behind the photocopier.</p><p>The team, which includes scientists from Drexel University, the Shubnikov Institute of Crystallography of the Russian Academy of Sciences, the University of Pennsylvania and the U. S. Naval Research Laboratory recently published its findings in the journal Nature Photonics. Their article ""Power conversion efficiency exceeding the Shockley-Queisser limit in a ferroelectric insulator,"" explains how they were able to use a barium titanate crystal to convert sunlight into electric power much more efficiently than the Shockley-Queisser limit would dictate for a material that absorbs almost no light in the visible spectrum — only ultraviolet.</p><p>A phenomenon that is the foundation for the new findings was observed by Fridkin, who is one of the principal co-authors of the paper, some 47 years ago, when he discovered a physical mechanism for converting light into electrical power — one that differs from the method currently employed in solar cells. The mechanism relies on collecting ""hot"" electrons, those that carry additional energy in a photovoltaic material when excited by sunlight, before they lose their energy. And though it has received relatively little attention until recently, the so-called ""bulk photovoltaic effect,"" might now be the key to revolutionizing our use of solar energy.</p><h3>The Limits of Solar Energy</h3><p>Solar energy conversion has been limited thus far due to solar cell design and electrochemical characteristics inherent to the materials used to make them.</p><p>""In a conventional solar cell — made with a semiconductor — absorption of sunlight occurs at an interface between two regions, one containing an excess of negative-charge carriers, called electrons, and the other containing an excess of positive-charge carriers, called holes,"" said Alessia Polemi, PhD, a research assistant professor in the Department of Materials Science and Engineering in Drexel's College of Engineering and one of the co-authors of the paper.</p><p>In order to generate electron-hole pairs at the interface, which is necessary to have an electric current, the sunlight's photons must excite the electrons to a level of energy that enables them to vacate the valence band and move into the conduction band — the difference in energy levels between these two bands is referred to as the ""band gap."" This means that in photovoltaic materials, not all of the available solar spectrum can be converted into electrical power. And for sunlight photon energies that are higher than the band gap, the excited electrons will lose it excess energy as heat, rather than converting it to electric current. This process further reduces the amount of power can be extracted from a solar cell.</p><p>""The light-induced carriers generate a voltage, and their flow constitutes a current. Practical solar cells produce power, which is the product of current and voltage,"" Polemi said. ""This voltage, and therefore the power that can be obtained, is also limited by the band gap.""</p><p>But, as Fridkin discovered in 1969 — and the team validates with this research — this limitation is not universal, which means solar cells can be improved.</p><h3>New Life For an Old Theory</h3><p>When Fridkin and his colleagues at the Institute of Crystallography in Moscow observed an unusually high photovoltage while studying the ferroelectric antimony sulfide iodide — a material that did not have any junction separating the carriers — he posited that crystal symmetry could be the origin for its remarkable photovoltaic properties. He later explained how this ""bulk photovoltaic effect,"" which is very weak, involves the transport of photo-generated hot electrons in a particular direction without collisions, which cause cooling of the electrons.</p><p>This is significant because the limit on solar power conversion from the Shockley-Queisser theory is based on the assumption that all of this excess energy is lost — wasted as heat. But the team's discovery shows that not all of the excess energy of hot electrons is lost, and that the energy can, in fact, be extracted as power before thermalizing.</p><p>""The main result — exceeding [the energy gap-specific] Shockley-Queisser [power efficiency limit] using a small fraction of the solar spectrum — is caused by two mechanisms,"" Fridkin said. ""The first is the bulk photovoltaic effect involving hot carriers and second is the strong screening field, which leads to impact ionization and multiplication of these carriers, increasing the quantum yield.""</p><p>Impact ionization, which leads to carrier multiplication, can be likened to an array of dominoes in which each domino represents a bound electron. When a photon interacts with an electron, it excites the electron, which, when subject to the strong field, accelerates and 'ionizes' or liberates other bound electrons in its path, each of which, in turn, also accelerates and triggers the release of others. This process continues successively  — like setting off multiple domino cascades with a single tipped tile — amounting to a much greater current.</p><p>This second mechanism, the screening field, is an electric field is present in all ferroelectric materials. But with the nanoscale electrode used to collect the current in a solar cell, the field is enhanced, and this has the beneficial effect of promoting impact ionization and carrier multiplication. Following the domino analogy, the field drives the cascade effect, ensuring that it continues from one domino to the next.</p><p>""This result is very promising for high efficiency solar cells based on application of ferroelectrics having an energy gap in the higher intensity region of the solar spectrum,"" Fridkin said.</p><h3>Building Toward a Breakthrough</h3><p>""Who would have expected that an electrical insulator could be used to improve solar energy conversion?"" said Jonathan E. Spanier, PhD, a professor of materials science, physics and electrical engineering at Drexel and one of the principal authors of the study. ""Barium titanate absorbs less than a tenth of the spectrum of the sun.  But our device converts incident power 50 percent more efficiently than the theoretical limit for a conventional solar cell constructed using this material or a material of the same energy gap.""</p><p>This breakthrough builds on research conducted several years ago by Andrew M. Rappe, Blanchard Professor of Chemistry and of Materials Science & Engineering at the University of Pennsylvania, one of the principal authors, and Steve M. Young, also a co-author on the new report. Rappe and Young showed how bulk photovoltaic currents could be calculated — which led Spanier and collaborators to investigate if higher power conversion efficiency could be attained in ferroelectrics.</p><p>""There are many exciting reports utilizing nanoscale materials or phenomena for improving solar energy conversion,"" Spanier said. ""Professor Fridkin appreciated decades ago that the bulk photovoltaic effect enables free electrons that are generated by light and have excess energy to travel in a particular direction before they cool or 'thermalize'—and lose their excess energy to vibrations of the crystal lattice.""</p><p>Rappe was also responsible for connecting Spanier to Fridkin in 2015, a collaboration that set in motion the research now detailed in <i>Nature Photonics</i> — a validation of Fridkin’s decades-old vision.</p><p>""Vladimir is internationally renowned for his pioneering contributions to the field of electroxerography, having built the first working photocopier in the world,"" Rappe said. ""He then became a leader in ferroelectricity and piezoelectricity, and preeminent in understanding light interactions with ferroelectrics. Fridkin explained how, in crystals that lack inversion symmetry, photo-excited electrons acquire asymmetry in their momenta. This, in turn, causes them to move in one direction instead of the opposite direction. It is amazing that the same person who discovered these bulk photovoltaic effects nearly 50 years ago is now helping to harness them for practical use in nanomaterials.""</p><p>The research was supported by the U.S. Army Research Office, the Office of Naval Research, the U. S. Department of Energy and the National Science Foundation.</p>",
                    date: new DateTime(2016, 03, 27, 17, 53, 48),
                    authorUsername: "merry@gmail.com"
                );

                CreatePost(context,
                    title: "First Reprogrammable Quantum Computer Created",
                    body: @"<p>Scientists have created the first programmable and reprogrammable quantum computer, according to a new study.</p><p>The technology could usher in a much-anticipated era of quantum computing, which researchers say could help scientists run complex simulations and produce rapid solutions to tricky calculations.</p><p>Previous research suggested that quantum computers could simultaneously perform more calculations in one instant than there are atoms in the universe. Prior work also found that such capabilities would allow quantum computers to solve certain problems much faster than conventional computers can, for instance, breaking encryption that would take regular computers longer than the lifetime of the sun to crack.</p><p>The functioning of quantum computers depends on the bizarre, surreal nature of quantum physics. The field suggests that atoms and other fundamental building blocks of the universe actually exist in states of flux known as ""superpositions."" ThisThat means that atoms, for example, can spin in two opposite directions at the same time.</ p><p>That kind of superposition makes quantum computing fundamentally different from traditional computers. Classical computers represent data as 1's and 0's, binary digits known as ""bits"" and symbolized by flicking switch-like transistors either on or off. Quantum computers, on the other hand, use quantum bits, or ""qubits, "" that are in superpositions, meaning that they are simultaneously on and off. This enables a qubit to essentially perform two calculations simultaneously.</p><p>Many research groups previously created small but functional quantum computers. However, these devices are typically specialized to run just one algorithm, or step-by-step set of operations.</p><p>""Until now, there hasn't been any quantum-computing platform that had the capability to program new algorithms into their system. They're usually each tailored to attack a particular algorithm, "" said study lead author Shantanu Debnath, a quantum physicist and optical engineer at the University of Maryland, College Park.</p><p>Now, Debnath and his colleagues have developed the first fully programmable and reprogrammable quantum computer. The new device is made of five qubits. Each qubit is an ion, or electrically charged particle, trapped in a magnetic field.</p><p>The scientists can use lasers to manipulate these ions — five ytterbium atoms — infusing them with precise amounts of energy and influencing their interactions with each other. In this way, the researchers can program and reprogram the quantum computer with a variety of algorithms.</p><p>The researchers tested their device on three algorithms that quantum computers, as prior work showed, could execute quickly. One, the so-called Deutsch-Jozsa algorithm, is typically used only for tests of quantum-computing capabilities. Another, the Bernstein-Vazirani algorithm, can also be used to probe for errors in quantum computing. The last, the quantum Fourier transform algorithm, is an element in quantum-computing encryption-breaking applications.</p><p>The Deutsch-Jozsa and Bernstein-Vazirani algorithms successfully ran 95 and 90 percent of the time, respectively. The quantum Fourier transform algorithm, which the researchers said is among the most complicated quantum calculations, had a 70 percent success rate, they said.</p><p>In the future, the researchers will test more algorithms on their device, Debnath said. ""We'd like this system to serve as a test bed for examining the challenges of multiqubit operations, and find ways to make them better,"" Debnath told.</p>",
                    date: new DateTime(2016, 02, 18, 22, 14, 38),
                    authorUsername: "pesho@gmail.com"
                );

                CreatePost(context,
                    title: "A simple wireless technology promises to make driving much safer",
                    body: @"<p>Hariharan Krishnan hardly looks like a street racer. With thin-rimmed glasses and a neat mustache, he reminds me of a math teacher. And yet on a sunny day last September, he was speeding, seemingly recklessly, around the parking lot at General Motors’ research center in Warren, Michigan, in a Cadillac DTS.</p><p>I was in the passenger seat as Krishnan wheeled around a corner and hit the gas. A moment later a light flashed on the dashboard, there was a beeping sound, and our seats started buzzing furiously. Krishnan slammed on the brakes, and we lurched to a stop just as another car whizzed past from the left, its approach having been obscured by a large hedge. ""You can see I was completely blinded,"" he said calmly.</p><p>The technology that warned of the impending collision will start appearing in cars in just a couple of years. Called car-to-car or vehicle-to-vehicle communication, it lets cars broadcast their position, speed, steering-wheel position, brake status, and other data to other vehicles within a few hundred meters. The other cars can use such information to build a detailed picture of what's unfolding around them, revealing trouble that even the most careful and alert driver, or the best sensor system, would miss or fail to anticipate.</p><p>Already many cars have instruments that use radar or ultrasound to detect obstacles or vehicles. But the range of these sensors is limited to a few car lengths, and they cannot see past the nearest obstruction.</p><p>Car-to-car communication should also have a bigger impact than the advanced vehicle automation technologies that have been more widely heralded. Though self-driving cars could eventually improve safety, they remain imperfect and unproven, with sensors and software too easily bamboozled by poor weather, unexpected obstacles or circumstances, or complex city driving. Simply networking cars together wirelessly is likely to have a far bigger and more immediate effect on road safety.</p><p>Creating a car-to-car network is still a complex challenge. The computers aboard each car process the various readings being broadcast by other vehicles 10 times every second, each time calculating the chance of an impending collision. Transmitters use a dedicated portion of wireless spectrum as well as a new wireless standard, 802.11p, to authenticate each message.</p><p>Krishnan took me through several other car-to-car safety scenarios in the company's parking lot. When he started slowly pulling into a parking spot occupied by another car, a simple alert sounded. When he attempted a risky overtaking maneuver, a warning light flashed and a voice announced: ""Oncoming vehicle!""</p><p>More than five million crashes occur on U.S. roads alone every year, and more than 30,000 of those are fatal. The prospect of preventing many such accidents will provide significant impetus for networking technology.</p><p>Just an hour’s drive west of Warren, the town of Ann Arbor, Michigan, has done much to show how valuable car-to-car communication could be. There, between 2012 and 2014, the National Highway Traffic Safety Administration and the University of Michigan equipped nearly 3,000 cars with experimental transmitters. After studying communication records for those vehicles, NHTSA researchers concluded that the technology could prevent more than half a million accidents and more than a thousand fatalities in the United States every year. The technology stands to revolutionize the way we drive, says John Maddox, a program director at the University of Michigan's Transportation Research Institute.</p><p>Shortly after the Ann Arbor trial ended, the U.S. Department of Transportation announced that it would start drafting rules that could eventually mandate the use of car-to-car communication in new cars. The technology is also being tested in Europe and Japan.</p><p>There will, of course, also be a few obstacles to navigate. GM has committed to using car-to-car communication in a 2017-model Cadillac. Those first Cadillacs will have few cars to talk to, and that will limit the value of the technology. It could still be more than a decade before vehicles that talk to each other are commonplace.</p>",
                    date: new DateTime(2016, 04, 11, 19, 02, 05),
                    authorUsername: "geshu@gmail.com"
                );

                CreatePost(context,
                    title: "Brain Organoids",
                    body: @"<p><i>A new method for growing human brain cells could unlock the mysteries of dementia, mental illness, and other neurological disorders.</i></p><p>As Madeline Lancaster lifts a clear plastic dish into the light, roughly a dozen clumps of tissue the size of small baroque pearls bob in a peach-­colored liquid. These are cerebral organoids, which possess certain features of a human brain in the first trimester of development—including lobes of cortex. The bundles of human tissue are not exactly ""brains growing in a dish,"" as they’re sometimes called. But they do open a new window into how neurons grow and function, and they could change our understanding of everything from basic brain activities to the causes of schizophrenia and autism.</p><p>Before it grows in one of Lancaster's dishes, a brain organoid begins as a single skin cell taken from an adult. With the right biochemical prodding, that cell can be turned into an induced pluripotent stem cell (the kind that can mature into one of several types of cells) and then into a neuron. This makes it possible to do things that were impossible before. Now scientists can directly see how networks of living human brain cells develop and function, and how they're affected by various drug compounds or genetic modifications. And because these mini-brains can be grown from a specific person's cells, organoids could serve as unprecedentedly accurate models for a wide range of diseases. What goes wrong, for example, in neurons derived directly from someone with Alzheimer's disease?</p><p>The prospect of finding answers to such questions is leading pharmaceutical companies and academic researchers to seek collaborations with Lancaster and Jurgen Knoblich, whose lab at the Institute of Molecular Biotechnology (IMBA) in Vienna, Austria, is where Lancaster developed the organoids as a postdoc. The first of these collaborations was an investigation of microcephaly, a disorder characterized by small brain size, with Andrew Jackson of the University of Edinburgh. Using cells derived from a patient with microcephaly, the team cultured organoids that shared characteristics with the patient's brain. Then the researchers replaced a defective protein associated with the disorder and were able to culture organoids that appeared partially cured.</p><p>This is just the beginning, says Lancaster. Researchers such as Rudolph Jaenisch at MIT and Guo-li Ming at Johns Hopkins are beginning to use brain organoids to investigate autism, schizophrenia, and epilepsy. What makes cerebral organoids particularly useful is that their growth mirrors aspects of human brain development. The cells divide, take on the characteristics of, say, the cerebellum, cluster together in layers, and start to look like the discrete three-dimensional structures of a brain. If something goes wrong along the way—which is observable as the organoids grow—scientists can look for potential causes, mechanisms, and even drug treatments.</p><p>The breakthrough in creating these organoids happened as part of a side project. Other researchers had grown neurons in a dish before, and like them, Lancaster started by using a flat plate to ""play"" with neural stem cells—the kind that form into neurons and other cells in the nervous system. Sometimes, she says, ""I'd get neural stem cells that wouldn't really stay in 2-D, and they would kind of fall off the plate and they'd make 3-D clumps—and rather than ignoring them or throwing them away, I thought, 'Those are cool—let’s see what happens if I let them keep growing.'"" But there was a major challenge: how to keep the tissue at the center of the organoids fed without the benefit of veins. ­Lancaster's solution was to encapsulate each organoid in a matrix known to nurture cells, put a dozen of these blobs in a nutritious bath, and shake or spin it all to keep the organoids awash in cellular food.</p><p>Since publishing her method, Lancaster has pushed the brain tissue to further levels of complexity with neurons at later stages of development. The number of possible applications grows with each advance. Most tantalizing to Lancaster herself is the prospect that cerebral organoids might solve the deepest of mysteries: what happens in our brains to set us apart from other animals? ""I'm mainly interested,"" she says, ""in figuring out what it is that makes us human.""</p>",
                    date: new DateTime(2016, 06, 30, 17, 36, 52),
                    authorUsername: "merry@gmail.com"
                );

                context.SaveChanges();
            }
        }

        private void CreateUser(ApplicationDbContext context,
            string email, string password, string fullName)
        {
            var userManager = new UserManager<ApplicationUser>(
                new UserStore<ApplicationUser>(context));
            userManager.PasswordValidator = new PasswordValidator
            {
                RequiredLength = 1,
                RequireNonLetterOrDigit = false,
                RequireDigit = false,
                RequireLowercase = false,
                RequireUppercase = false,
            };

            var user = new ApplicationUser
            {
                UserName = email,
                Email = email,
                FullName = fullName
            };

            var userCreateResult = userManager.Create(user, password);
            if (!userCreateResult.Succeeded)
            {
                throw new Exception(string.Join("; ", userCreateResult.Errors));
            }
        }

        private void CreateRole(ApplicationDbContext context, string roleName)
        {
            var roleManager = new RoleManager<IdentityRole>(
                new RoleStore<IdentityRole>(context));
            var roleCreateResult = roleManager.Create(new IdentityRole(roleName));
            if (!roleCreateResult.Succeeded)
            {
                throw new Exception(string.Join("; ", roleCreateResult.Errors));
            }
        }

        private void AddUserToRole(ApplicationDbContext context, string userName, string roleName)
        {
            var user = context.Users.First(u => u.UserName == userName);
            var userManager = new UserManager<ApplicationUser>(
                new UserStore<ApplicationUser>(context));
            var addAdminRoleResult = userManager.AddToRole(user.Id, roleName);
            if (!addAdminRoleResult.Succeeded)
            {
                throw new Exception(string.Join("; ", addAdminRoleResult.Errors));
            }
        }

        private void CreatePost(ApplicationDbContext context,
            string title, string body, DateTime date, string authorUsername)
        {
            var post = new Post();
            post.Title = title;
            post.Body = body;
            post.Date = date;
            post.Author = context.Users.Where(u => u.UserName == authorUsername).FirstOrDefault();
            context.Posts.Add(post);
        }
    }
}
